1.Tablica uzytkownika:

CREATE TABLE uzytkownicy
( usr_id number,
  usr_name varchar2(50),
  usr_email varchar2(50) UNIQUE,
  usr_birt DATE,
  usr_tel number,
  usr_password varchar2(50) NOT NULL,
  usr_permission number DEFAULT(1),
  CONSTRAINT uzytkownicy_pk PRIMARY KEY (usr_id)
);


2.Tablica przedmioty

CREATE TABLE przedmioty
( prze_id number,
  prze_nazwa varchar2(50) NOT NULL,
  prze_opis varchar2(500),
  prze_cena number NOT NULL,
  prze_image varchar2(50),     ### Dodajemy ocenê krytyków do przedmiotu
  kate_id number,
  PRZE_CRITIC_RATE number,
  CONSTRAINT przedmioty_pk PRIMARY KEY (prze_id),
  CONSTRAINT fk_prze_kate_id FOREIGN KEY (kate_id)
  references kategorie(kate_id)
);

3.Tablica Kategorii

CREATE TABLE kategorie
( kate_id number,
  kate_nazwa varchar2(50) NOT NULL,
  CONSTRAINT kate_pk PRIMARY KEY (kate_id)
);

CREATE SEQUENCE dept_seq START WITH 1;

4.Tablica Oceny

CREATE TABLE oceny
( oce_id number GENERATED BY DEFAULT ON NULL AS IDENTITY,
  oce_rate number,
  oce_Message varchar2(250) NOT NULL,
  oce_date DATE DEFAULT(sysdate),
  usr_id number,
  prze_id number,
  CONSTRAINT oceny_pk PRIMARY KEY (oce_id),
  CONSTRAINT fk_oceny_usr_id FOREIGN KEY (usr_id)
  references uzytkownicy(usr_id),
  CONSTRAINT fk_oceny_prze_id FOREIGN KEY (prze_id)
  references przedmioty(prze_id)
);

5.Tablica Transakcje

CREATE TABLE transakcje
( tra_id number GENERATED BY DEFAULT ON NULL AS IDENTITY,
  tra_price number,
  tra_datetime DATE DEFAULT (sysdate),
  tra_status number,
  prze_id number,
  usr_id number,
  CONSTRAINT transakcje_pk PRIMARY KEY (tra_id),
  CONSTRAINT fk_usr_id FOREIGN KEY (usr_id)
  references uzytkownicy(usr_id),
  CONSTRAINT fk_prze_id FOREIGN KEY (prze_id)
  references przedmioty(prze_id)
);

6.Tablica Biblioteka

CREATE TABLE biblioteki
( bib_id number  GENERATED BY DEFAULT ON NULL AS IDENTITY,
  bib_date DATE,
  usr_id number,
  prze_id number,
  tra_id number,
  CONSTRAINT biblioteki_pk PRIMARY KEY (bib_id),
  CONSTRAINT fk_biblio_user_id FOREIGN KEY (usr_id)
  references uzytkownicy(usr_id),
  CONSTRAINT fk_biblio_prze_id FOREIGN KEY (prze_id)
  references przedmioty(prze_id),
  CONSTRAINT fk_biblio_tra_id FOREIGN KEY (tra_id)
  references transakcje(tra_id)
);


7. Tablica dostepnych regionów ?

8. Archiwum komentarzy

CREATE TABLE arch_komentarze
( arch_koment_id number;
  arch_koment_date
  

);

3.Tablica Komentarze

CREATE TABLE komentarze
( kom_id number,
  kom_Message varchar2(250) NOT NULL,
  usr_id number NOT NULL,
  prze_id number NOT NULL,
  CONSTRAINT komentarze_pk PRIMARY KEY (kom_id)
);

# GENERATED BY DEFAULT ON NULL AS IDENTITY,
# Na przyszloscie od wersji Oracle 12+ mozna korzystac z powyzszej konstrukcji

TRIGGERY

CREATE SEQUENCE _seq START WITH 1;

CREATE OR REPLACE TRIGGER _bir 
BEFORE INSERT ON TABELA
FOR EACH ROW

BEGIN
  SELECT dept_seq.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/